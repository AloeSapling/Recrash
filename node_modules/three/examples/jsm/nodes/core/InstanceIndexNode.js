import Node, { addNodeClass } from './Node.js';
<<<<<<< HEAD
import { varying } from '../core/VaryingNode.js';
=======
>>>>>>> 39788b5e01a4817c1ea46a2f2383841e87dacb23
import { nodeImmutable } from '../shadernode/ShaderNode.js';

class InstanceIndexNode extends Node {

	constructor() {

		super( 'uint' );

		this.isInstanceIndexNode = true;

	}

	generate( builder ) {

<<<<<<< HEAD
		const nodeType = this.getNodeType( builder );

		const propertyName = builder.getInstanceIndex();

		let output = null;

		if ( builder.shaderStage === 'vertex' || builder.shaderStage === 'compute' ) {

			output = propertyName;

		} else {

			const nodeVarying = varying( this );

			output = nodeVarying.build( builder, nodeType );

		}

		return output;
=======
		return builder.getInstanceIndex();
>>>>>>> 39788b5e01a4817c1ea46a2f2383841e87dacb23

	}

}

export default InstanceIndexNode;

export const instanceIndex = nodeImmutable( InstanceIndexNode );

addNodeClass( InstanceIndexNode );
