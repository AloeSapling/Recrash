{"ast":null,"code":"import _classCallCheck from\"C:/Users/Komputer 2020/Desktop/hakaton-projekt/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Komputer 2020/Desktop/hakaton-projekt/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/Komputer 2020/Desktop/hakaton-projekt/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/Komputer 2020/Desktop/hakaton-projekt/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _slicedToArray from\"C:/Users/Komputer 2020/Desktop/hakaton-projekt/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Component,useState,useEffect}from\"react\";import\"../css/geosearch.css\";import{MapContainer,TileLayer,Popup,Marker,withLeaflet,useMapEvents,LayerGroup,LayersControl,useMap}from\"react-leaflet\";import'../css/map.css';import icon from\"../css/LeafletCSS&IMG/icon\";import{GeoJSON}from\"react-leaflet\";import'leaflet/dist/leaflet.css';import{latLng}from\"leaflet\";import{OpenStreetMapProvider,GeoSearchControl}from\"leaflet-geosearch\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var overpass=require(\"query-overpass\");function Mapa(){var mapBounds=[[-90,-180],[90,180]];var _useState=useState(),_useState2=_slicedToArray(_useState,2),lat=_useState2[0],setLat=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),lng=_useState4[0],setLng=_useState4[1];var _created=function _created(e){return console.log(e);};var Search=function Search(props){var map=useMap();useEffect(function(){var provider=new OpenStreetMapProvider();var searchControl=new GeoSearchControl({provider:provider,marker:{icon:icon}});map.addControl(searchControl);return function(){return map.removeControl(searchControl);};},[props]);return null;};var LocationFinderDummy=function LocationFinderDummy(){var map=useMapEvents({click:function click(e){console.log(e.latlng);setLat(e.latlng.lat);setLng(e.latlng.lng);console.log(lat,lng);}});return null;};console.log([lat,lng]);var Bins=/*#__PURE__*/function(_React$Component){_inherits(Bins,_React$Component);var _super=_createSuper(Bins);function Bins(props){var _this;_classCallCheck(this,Bins);_this=_super.call(this,props);_this.dataHandler=function(error,osmData){if(!error&&osmData.features!==undefined){_this.setState({geojson:osmData});}};_this.state={geojson:undefined};return _this;}_createClass(Bins,[{key:\"componentDidMount\",value:function componentDidMount(){var query=\" [out:json];(way[amenity=recycling](around:99999, \".concat([lat,lng],\");        relation[amenity=recycling](around:99999, \").concat([lat,lng],\"););\\n        out body;>;out skel qt;\");var options={flatProperties:true,overpassUrl:'https://overpass-api.de/api/interpreter'};overpass(query,this.dataHandler,options);}},{key:\"render\",value:function render(){return this.state.geojson?/*#__PURE__*/_jsx(GeoJSON,{data:this.state.geojson}):null;}}]);return Bins;}(React.Component);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(MapContainer,{maxBounds:mapBounds,className:\"map\",zoom:8,center:{lat:51.5287718,lng:-0.2416804},children:[/*#__PURE__*/_jsx(TileLayer,{url:\"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}.png\"}),/*#__PURE__*/_jsx(LocationFinderDummy,{}),/*#__PURE__*/_jsx(Bins,{}),/*#__PURE__*/_jsxs(LayersControl,{children:[/*#__PURE__*/_jsx(LayersControl.BaseLayer,{name:'mapa początkowa',checked:true,children:/*#__PURE__*/_jsx(TileLayer,{url:\"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}.png\",subdomains:[\"mt0\",\"mt1\",\"mt2\",\"mt3\"],attribution:\"&copy <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\",noWrap:true})}),/*#__PURE__*/_jsx(LayersControl.BaseLayer,{name:'satelita',children:/*#__PURE__*/_jsx(TileLayer,{url:\"http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}\",subdomains:[\"mt0\",\"mt1\",\"mt2\",\"mt3\"],attribution:\"Tiles &copy Esri &mdash Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community\",noWrap:true})})]}),/*#__PURE__*/_jsx(Search,{provider:new OpenStreetMapProvider(),children:/*#__PURE__*/_jsx(Marker,{})})]})});}export default Mapa;","map":{"version":3,"names":["React","Component","useState","useEffect","MapContainer","TileLayer","Popup","Marker","withLeaflet","useMapEvents","LayerGroup","LayersControl","useMap","icon","GeoJSON","latLng","OpenStreetMapProvider","GeoSearchControl","jsx","_jsx","jsxs","_jsxs","overpass","require","Mapa","mapBounds","_useState","_useState2","_slicedToArray","lat","setLat","_useState3","_useState4","lng","setLng","_created","e","console","log","Search","props","map","provider","searchControl","marker","addControl","removeControl","LocationFinderDummy","click","latlng","Bins","_React$Component","_inherits","_super","_createSuper","_this","_classCallCheck","call","dataHandler","error","osmData","features","undefined","setState","geojson","state","_createClass","key","value","componentDidMount","query","concat","options","flatProperties","overpassUrl","render","data","children","maxBounds","className","zoom","center","url","BaseLayer","name","checked","subdomains","attribution","noWrap"],"sources":["C:/Users/Komputer 2020/Desktop/hakaton-projekt/src/components/map.jsx"],"sourcesContent":["import React, { Component, useState, useEffect } from \"react\";\r\nimport \"../css/geosearch.css\"\r\nimport {MapContainer, TileLayer, Popup, Marker, withLeaflet, useMapEvents, LayerGroup, LayersControl, useMap} from \"react-leaflet\";\r\nimport '../css/map.css'\r\nimport icon from \"../css/LeafletCSS&IMG/icon\"\r\nimport { GeoJSON } from \"react-leaflet\";\r\nimport 'leaflet/dist/leaflet.css';\r\nimport { latLng } from \"leaflet\";\r\nimport { OpenStreetMapProvider, GeoSearchControl } from \"leaflet-geosearch\"\r\nconst overpass = require(\"query-overpass\");\r\n\r\n\r\nfunction Mapa() {\r\n  \r\n  const mapBounds = [\r\n    [-90, -180],\r\n    [90, 180],\r\n  ]\r\n\r\n  const [lat , setLat] = useState()\r\n  const [lng , setLng] = useState()\r\n\r\n    \r\n\r\n  const _created = (e) => console.log(e)\r\n  const Search = (props) => {\r\n    const map = useMap()\r\n\r\n    useEffect(() => {\r\n      const provider = new OpenStreetMapProvider()\r\n\r\n      const searchControl = new GeoSearchControl({\r\n        provider,\r\n        marker: {\r\n          icon,\r\n        },\r\n      })\r\n\r\n      map.addControl(searchControl)\r\n      return () => map.removeControl(searchControl)\r\n    }, [props])\r\n    return null\r\n  }\r\n\r\n\r\n   const LocationFinderDummy = () => {\r\n    const map = useMapEvents({\r\n        click(e) {\r\n            console.log(e.latlng);\r\n            setLat(e.latlng.lat)\r\n            setLng(e.latlng.lng)\r\n            console.log(lat, lng)\r\n        },\r\n    });\r\n    return null;  \r\n  };\r\n    console.log([lat,lng]);\r\n\r\n    class Bins extends React.Component {\r\n      constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n          geojson: undefined\r\n        };\r\n      }\r\n    \r\n      componentDidMount() {\r\n        const query = ` [out:json];(way[amenity=recycling](around:99999, ${[lat , lng]});\\\r\n        relation[amenity=recycling](around:99999, ${[lat , lng]}););\r\n        out body;>;out skel qt;`;\r\n        \r\n        \r\n        const options = {\r\n          flatProperties: true,\r\n          overpassUrl: 'https://overpass-api.de/api/interpreter'\r\n        };\r\n        overpass(query, this.dataHandler, options);\r\n      }\r\n    \r\n      dataHandler = (error, osmData) => {\r\n        if (!error && osmData.features !== undefined) {\r\n          this.setState({ geojson: osmData });\r\n        }\r\n      };\r\n    \r\n      render() {\r\n        return this.state.geojson ? <GeoJSON data={this.state.geojson} /> : null;\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <MapContainer maxBounds={mapBounds} className=\"map\" zoom={8} center={{ lat: 51.5287718, lng: -0.2416804 }} >\r\n          <TileLayer\r\n              url='https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}.png'\r\n          />\r\n          <LocationFinderDummy/>\r\n          <Bins/>\r\n          <LayersControl>\r\n          <LayersControl.BaseLayer name={'mapa początkowa'} checked>\r\n            <TileLayer\r\n              url=\"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}.png\"\r\n              subdomains={[\"mt0\", \"mt1\", \"mt2\", \"mt3\"]}\r\n              attribution='&copy <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n              noWrap={true}\r\n            />\r\n          </LayersControl.BaseLayer>\r\n          <LayersControl.BaseLayer name={'satelita'}>\r\n            <TileLayer\r\n              url=\"http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}\"\r\n              subdomains={[\"mt0\", \"mt1\", \"mt2\", \"mt3\"]}\r\n              attribution=\"Tiles &copy Esri &mdash Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community\"\r\n              noWrap={true}\r\n            />\r\n          </LayersControl.BaseLayer>\r\n        </LayersControl>\r\n        <Search provider={new OpenStreetMapProvider()}>\r\n          <Marker />\r\n        </Search>\r\n        </MapContainer>\r\n      </div>\r\n    )\r\n\r\n\r\n}\r\n\r\n\r\nexport default Mapa;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}